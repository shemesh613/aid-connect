<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#1976D2">
  <meta name="description" content="Aid Connect - 砖专 砖转 拽">
  <link rel="manifest" href="manifest.json">
  <link rel="icon" type="image/png" sizes="192x192" href="icons/icon-192.png">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <title>Aid Connect - 转专转</title>
  <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
</head>
<body class="login-page">

  <a href="#main-content" class="skip-link"> 转 专砖</a>
  <div id="a11y-announcer" role="status" aria-live="polite" aria-atomic="true" class="sr-only"></div>

  <div class="login-container" role="main" id="main-content">
    <div class="login-logo" role="banner">
      <div class="logo-icon" aria-hidden="true">
        <span class="material-icons-round">volunteer_activism</span>
      </div>
      <h1>Aid Connect</h1>
      <p class="login-subtitle">砖专 砖转 拽</p>
    </div>

    <!-- Step 1: Email/Password Login -->
    <div id="step-login" class="login-step active" role="region" aria-label="转专转">
      <h2 id="auth-title" style="text-align:center; margin-bottom:16px; font-size:1.3rem;">转专转</h2>

      <div id="auth-name-group" class="input-group" style="display:none;">
        <label for="auth-display-name">砖 </label>
        <input type="text" id="auth-display-name" placeholder="砖专 砖专" autocomplete="name">
      </div>

      <div class="input-group">
        <label for="auth-email">转转 </label>
        <input type="email" id="auth-email" placeholder="your@email.com" autocomplete="email" inputmode="email">
      </div>

      <div class="input-group">
        <label for="auth-password">住住</label>
        <input type="password" id="auth-password" placeholder="驻转 6 转" autocomplete="current-password" minlength="6">
      </div>

      <button id="btn-auth-submit" class="btn btn-primary btn-full" onclick="submitAuth()" aria-label="转专转">
        <span class="material-icons-round">login</span>
        转专转
      </button>

      <div style="display:flex; justify-content:space-between; margin-top:12px; font-size:0.85rem;">
        <div id="auth-toggle" style="color:var(--text-secondary);">
            砖? <a href="#" onclick="toggleAuthMode(); return false;" style="color:var(--primary); font-weight:600;">专砖</a>
        </div>
        <a href="#" onclick="resetPassword(); return false;" style="color:var(--text-light); font-size:0.8rem;">砖转 住住</a>
      </div>
    </div>

    <!-- Step 2: Profile Setup (for new users) -->
    <div id="step-profile" class="login-step" role="region" aria-label="砖转 专砖">
      <h2>砖转 专砖</h2>
      <div class="input-group">
        <label for="user-name">砖 </label>
        <input type="text" id="user-name" placeholder="砖专 砖专" aria-required="true" autocomplete="name">
      </div>
      <div class="input-group">
        <label for="user-phone">住驻专 驻 (转)</label>
        <input type="tel" id="user-phone" placeholder="050-1234567" aria-required="true" autocomplete="tel">
      </div>
      <div class="input-group">
        <label id="role-label">转驻拽</label>
        <div class="role-selector" role="radiogroup" aria-labelledby="role-label">
          <button class="role-btn" data-role="requester" onclick="selectRole('requester')" role="radio" aria-checked="false" aria-label="拽砖 注专 - 砖转 拽专 住注">
            <span class="material-icons-round" aria-hidden="true">support</span>
            <span>拽砖 注专</span>
            <small>砖转 拽专 住注</small>
          </button>
          <button class="role-btn" data-role="volunteer" onclick="selectRole('volunteer')" role="radio" aria-checked="false" aria-label="转 - 拽转 砖转 注专">
            <span class="material-icons-round" aria-hidden="true">favorite</span>
            <span>转</span>
            <small>拽转 砖转 注专</small>
          </button>
          <button class="role-btn" data-role="admin" onclick="selectRole('admin')" role="radio" aria-checked="false" aria-label=" - 爪专转  砖转">
            <span class="material-icons-round" aria-hidden="true">admin_panel_settings</span>
            <span></span>
            <small>爪专转  砖转</small>
          </button>
        </div>
      </div>
      <div id="admin-code-group" class="input-group" style="display:none;">
        <label for="admin-code">拽 </label>
        <input type="text" id="admin-code" placeholder=" 拽 住 " autocomplete="off">
        <small style="color:var(--text-light); font-size:0.75rem;">*  专砖  爪专 拽</small>
      </div>
      <button id="btn-save-profile" class="btn btn-primary btn-full" onclick="saveProfile()" disabled aria-label="住 注专转">
        <span class="material-icons-round" aria-hidden="true">check_circle</span>
        住
      </button>
    </div>

    <!-- Loading -->
    <div id="step-loading" class="login-step" role="status" aria-label="转专">
      <div class="loading-spinner" aria-hidden="true"></div>
      <p>转专...</p>
    </div>

    <!-- Error -->
    <div id="login-error" class="error-msg" style="display:none;" role="alert" aria-live="assertive"></div>

    <!-- Developer Branding -->
    <div class="developer-branding" role="contentinfo" aria-label="注 注 驻转">
      <img src="icons/developer-logo.jpeg" alt=" 砖砖 '拽 AI" class="developer-logo">
      <div class="developer-info">
        <span class="developer-name">驻转 注" 砖砖 '拽 AI</span>
        <a href="tel:0526953500" class="developer-phone" aria-label="驻 转: 052-695-3500"> 转: 052-695-3500</a>
      </div>
    </div>
  </div>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-messaging-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyAiX5hNA0nHE5Ose3XoHY84n3y99pdL4F8",
      authDomain: "aid-connect-2059d.firebaseapp.com",
      projectId: "aid-connect-2059d",
      storageBucket: "aid-connect-2059d.firebasestorage.app",
      messagingSenderId: "214156347220",
      appId: "1:214156347220:web:bbde9a71c36119b1db6ac1",
      measurementId: "G-EFGWRRGVJ4"
    };
    firebase.initializeApp(firebaseConfig);
    firebase.auth().languageCode = 'he';
  </script>
  <script src="js/auth.js"></script>
  <script src="js/accessibility.js"></script>
</body>
</html>
